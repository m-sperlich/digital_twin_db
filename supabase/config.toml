# Supabase Configuration for XR Future Forests Lab
# This file configures the local Supabase instance for development

project_id = "xr-future-forests-lab"

[api]
# Port for PostgREST API server
port = 54321
# Schemas exposed through the API
schemas = ["public", "shared", "pointclouds", "trees", "sensor", "environments"]
# Extra search path for schemas
extra_search_path = ["public", "shared"]
# Max rows returned per request
max_rows = 1000

[db]
# PostgreSQL database port
port = 54322
# Database name
name = "postgres"
# Enable PostGIS extension
extensions = ["postgis", "uuid-ossp", "pg_stat_statements"]

[studio]
# Supabase Studio web UI port
port = 54323
# Enable API documentation
enabled = true

[auth]
# Authentication port
port = 54324
# Site URL for auth redirects
site_url = "http://localhost:3000"
# Additional redirect URLs
additional_redirect_urls = ["http://localhost:8000"]
# JWT expiry
jwt_expiry = 3600
# Enable sign up
enable_signup = true

[storage]
# Storage API port
port = 54325
# File size limit (in MB) - 2GB for LiDAR files
file_size_limit = 2048
# S3 configuration for external buckets
[storage.buckets.pointclouds]
public = false
file_size_limit = 2048
allowed_mime_types = ["application/octet-stream", "application/x-las", "application/x-laz"]

[functions]
# Edge Functions port (Deno runtime)
port = 54326

[realtime]
# Realtime subscription port
port = 54327

# Database pooler configuration
[db.pooler]
enabled = true
port = 54329
pool_mode = "transaction"
default_pool_size = 20
max_client_conn = 100

# Local development settings
[local]
# Use local SMTP for email testing
smtp_host = "localhost"
smtp_port = 54325
smtp_user = "supabase"
smtp_pass = "supabase"

# Environment-specific settings
[environments.development]
api_url = "http://localhost:54321"
anon_key = "development_anon_key"
service_role_key = "development_service_role_key"

[environments.production]
# Production settings - update these for VM deployment
api_url = "https://your-vm-domain.com"
# Generate secure keys for production
anon_key = "your_production_anon_key"
service_role_key = "your_production_service_role_key"
